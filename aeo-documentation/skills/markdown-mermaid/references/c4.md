# C4 Diagrams

**Keyword:** `C4Context`, `C4Container`, `C4Component`, `C4Dynamic`, `C4Deployment`

**Status:** Experimental (incomplete feature support)

**Purpose:** Hierarchical architecture visualization (Context -> Container -> Component -> Dynamic -> Deployment).

## Table of Contents
- [C4 Context Diagram](#c4-context-diagram)
- [C4 Container Diagram](#c4-container-diagram)
- [C4 Component Diagram](#c4-component-diagram)
- [Element Types](#element-types)
- [Boundaries](#boundaries)
- [Relationships](#relationships)
- [Styling](#styling)
- [Layout Configuration](#layout-configuration)
- [Key Limitations](#key-limitations)
- [When to Use](#when-to-use)

## C4 Context Diagram

```mermaid
C4Context
    title System Context
    Person(customer, "Customer", "End user")
    System(system, "My System", "Core application")
    System_Ext(external, "External System")

    Rel(customer, system, "Uses")
    Rel(system, external, "Sends data")
```

## C4 Container Diagram

```mermaid
C4Container
    title Container Diagram
    Person(user, "User")
    Container(web, "Web App", "React", "Frontend")
    ContainerDb(db, "Database", "PostgreSQL", "Data store")

    Rel(user, web, "Uses", "HTTPS")
    Rel(web, db, "Reads/Writes", "SQL")
```

## C4 Component Diagram

```mermaid
C4Component
    title Component Diagram
    Component(controller, "API Controller", "Handles requests")
    Component(service, "Business Service", "Business logic")
    ComponentDb(cache, "Cache", "Redis", "Session cache")

    Rel(controller, service, "Calls")
    Rel(service, cache, "Stores")
```

## Element Types

**People:**
- `Person(id, label, description)`
- `Person_Ext(id, label, description)` - External person

**Systems:**
- `System(id, label, description)`
- `SystemDb(id, label, description)` - Database system
- `SystemQueue(id, label, description)` - Queue system
- `System_Ext()` - External system

**Containers:**
- `Container(id, label, tech, description)`
- `ContainerDb()` - Database container
- `ContainerQueue()` - Queue container

**Components:**
- `Component(id, label, description)`
- `ComponentDb()` - Database component
- `ComponentQueue()` - Queue component

## Boundaries

```mermaid
C4Container
    Boundary(b1, "Internal System") {
        Container(app, "App")
        ContainerDb(db, "Database")
    }
    Enterprise_Boundary(b2, "Company") {
        System(sys, "System")
    }
```

## Relationships

**Standard:**
```mermaid
Rel(source, target, "Label")
BiRel(a, b, "Bidirectional")
```

**Directional:**
```mermaid
Rel_U(a, b, "Up")
Rel_D(a, b, "Down")
Rel_L(a, b, "Left")
Rel_R(a, b, "Right")
```

**Dynamic (numbered):**
```mermaid
C4Dynamic
    RelIndex(1, a, b, "First interaction")
    RelIndex(2, b, c, "Second interaction")
```

## Styling

```mermaid
C4Context
    UpdateElementStyle(system, $bgColor="blue", $fontColor="white")
    UpdateRelStyle(customer, system, $lineColor="red")
```

## Layout Configuration

```mermaid
%%{init: {'c4': {'c4ShapeInRow': 3, 'c4BoundaryInRow': 2}}}%%
C4Context
    System(a, "A")
    System(b, "B")
```

## Key Limitations (Experimental)
- Sprites not supported
- Tags not supported
- Links not supported
- Legends not supported
- Automatic layout algorithms unavailable
- Limited compared to PlantUML C4

## When to Use
- System architecture documentation
- Technical onboarding
- Architecture decision records
- High-level design communication
