---
name: setup
version: 0.2.0
description: Configure nous statusline logging without disrupting your existing statusline
---

# Nous Statusline Setup

The nous system needs to log Claude Code's status data (context window %, tokens, etc.) to track when to extract learnings. This setup adds logging **without replacing your existing statusline**.

## What to do

1. **Read the user's current statuslineCommand** from `~/.claude/settings.json`

2. **Generate `~/.claude/nous-statusline.sh`** - a wrapper script:

```bash
#!/bin/bash
# Auto-generated by /nous:setup
# Wraps the user's statusline with nous activity logging
input=$(cat)

# Nous activity logging (silent - no stdout)
PLUGIN_LOGGER="${NOUS_LOGGER_PATH}"
echo "$input" | "$PLUGIN_LOGGER"

# Pass through to original statusline (if any)
ORIGINAL_CMD="${ORIGINAL_STATUSLINE_CMD}"
if [ -n "$ORIGINAL_CMD" ]; then
    echo "$input" | eval "$ORIGINAL_CMD"
fi
```

Replace `${NOUS_LOGGER_PATH}` with the absolute path to the installed plugin's `hooks/nous-logger.sh`. Find this by reading `~/.claude/plugins/installed_plugins.json` and looking for `aeo-nous@aeo-skill-marketplace` installPath, then append `/hooks/nous-logger.sh`.

Replace `${ORIGINAL_STATUSLINE_CMD}` with the user's current statuslineCommand value (empty string if none).

3. **Make the wrapper executable**: `chmod +x ~/.claude/nous-statusline.sh`

4. **Update `~/.claude/settings.json`**: Set statuslineCommand to `~/.claude/nous-statusline.sh`

Use the `statusline-setup` Task agent (subagent_type: "statusline-setup") if available to configure the statusLine setting. Otherwise edit settings.json directly.

5. **Tell the user** to restart Claude Code for changes to take effect.

## If user has no existing statusline

The wrapper will just log (no visual output). Optionally suggest they can use the bundled example statusline by setting ORIGINAL_CMD to the plugin's `hooks/statusline-example.sh`.

## If user already has a statusline

Their visual output will be preserved exactly as-is. The only addition is silent JSONL logging.
